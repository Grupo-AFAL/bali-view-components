#!/usr/bin/env bash
#
# Optimized script for Lookbook browsing.
# Builds assets once (no watchers) for fast page loads.
#
# Trade-off: CSS/JS changes require re-running this script.
# Use bin/dev when actively editing component styles/JS.

set -e

cd "$(dirname "$0")/.."

echo "Building Tailwind CSS..."
bin/rails tailwindcss:build

echo "Building Vite assets..."
bin/vite build --mode development

echo ""
echo "Starting Rails server on port 3001..."
echo "Lookbook: http://localhost:3001/lookbook"
echo ""
echo "Note: CSS/JS changes require restart. Use bin/dev for active development."
echo ""

exec bin/rails server -p 3001
