<%# DataTable with Pagy pagination - summary is auto-generated %>
<%= render Bali::DataTable::Component.new(url: request.path, pagy: pagy, item_name: 'movies') do |c| %>
  <% c.with_filters_panel(available_attributes: filter_attributes) %>

  <% c.with_table do %>
    <%= render Bali::Table::Component.new(form: filter_form) do |t| %>
      <%= t.with_header(name: 'Name', sort: :name) %>
      <%= t.with_header(name: 'Genre', sort: :genre) %>
      <%= t.with_header(name: 'Studio') %>
      <%= t.with_header(name: 'Status') %>
      <%= t.with_header(name: 'Created At', sort: :created_at) %>

      <% movies.each do |movie| %>
        <%= t.with_row do %>
          <td class="font-medium"><%= movie.name %></td>
          <td><%= movie.genre %></td>
          <td class="text-sm text-base-content/70"><%= movie.tenant&.name %></td>
          <td>
            <span class="badge <%= movie.done? ? 'badge-success' : 'badge-warning' %>">
              <%= movie.status.humanize %>
            </span>
          </td>
          <td class="text-sm text-base-content/70">
            <%= movie.created_at.strftime('%b %d, %Y') %>
          </td>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
