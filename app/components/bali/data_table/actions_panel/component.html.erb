<% if @export_formats.size == 1 %>
  <%= render Bali::Link::Component.new(name: render(Bali::Icon::Component.new('download')),
      href: url({ format: @export_formats.last }), type: :text) %>
<% elsif @export_formats.size.positive? %>
  <%= render Bali::Dropdown::Component.new(class: 'ml-4') do |c| %>
    <% c.with_trigger(class: 'dropdown-link button is-text is-arrowless') do %>
      <%= render Bali::Icon::Component.new('download') %>
    <% end %>

    <% @export_formats.each_with_index do |export_format, index| %>
      <%= render Bali::Link::Component.new(
          name: export_format.upcase, href: url({ format: export_format }), class: "dropdown-item") %>

      <%= tag.div(class: 'dropdown-divider') if index < @export_formats.size - 1 %>
    <% end %>
  <% end %>
<% end %>

<% if @grid_display_mode_enabled %>
  <%= tag.span('&#9474;'.html_safe, class: 'mx-2 has-text-grey-light') if @export_formats.size.positive? %>

  <%= render Bali::Link::Component.new(name: render(Bali::Icon::Component.new('list')),
      href: url({ @display_mode_param_name => :table }),
      type: :text, active: @display_mode&.to_sym == :table, data: { turbo_stream: true }) %>

  <%= render Bali::Link::Component.new(name: render(Bali::Icon::Component.new('grid')),
      href: url({ @display_mode_param_name => :grid }),
      type: :text, active: @display_mode&.to_sym == :grid, data: { turbo_stream: true }) %>
<% end %>