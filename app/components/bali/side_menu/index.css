/* Side Menu Component
 * Nexus-style sidebar with DaisyUI collapse for expandable groups
 */

.side-menu-component {
  --side-menu-width: 16rem;
  --side-menu-collapsed-width: 3.5rem;
  --navbar-height: 3.75rem;

  @apply flex flex-col bg-base-100;
  width: var(--side-menu-width);
  transition: width 0.2s ease-in-out;
  overflow: visible;
}

/* Fixed positioning variant - for full-page sidebars */
.side-menu-component--fixed {
  @apply fixed top-0 left-0 h-full shadow-lg z-40 bg-base-100;
  width: var(--side-menu-width);
  transform: translateX(-100%);
  transition: transform 0.2s ease-in-out, width 0.2s ease-in-out;

  /* Visible on desktop */
  @media (min-width: 1024px) {
    transform: translateX(0);
  }

  /* Active state (mobile menu open) */
  &.is-active {
    transform: translateX(0);
  }
}

.side-menu-component--inline {
  width: 100%;
  background-color: transparent;

  .menu-item:hover {
    @apply bg-base-300;
  }
}

/* ========================================
   Menu Item Styling (Nexus pattern)
   ======================================== */

.sidebar-menu {
  @apply space-y-1;

  /* Allow dropdowns to overflow outside the menu container */
  .dropdown {
    overflow: visible;
  }

  .dropdown-content {
    position: fixed;
  }
}

.menu-item {
  @apply flex items-center gap-2 px-2.5 py-2 rounded-lg cursor-pointer;
  @apply text-base-content/80 hover:bg-base-200 hover:text-base-content;
  @apply transition-all duration-200;

  &.active {
    @apply bg-primary/10 text-primary font-medium;
  }
}

.menu-label {
  @apply text-xs font-semibold uppercase tracking-wider text-base-content/50;
}

/* ========================================
   Collapse Component Styling
   ======================================== */

.side-menu-component .collapse {
  @apply rounded-lg;
}

.side-menu-component .collapse-title {
  @apply flex items-center gap-2 min-h-0 px-2.5 py-2 rounded-lg cursor-pointer;
  @apply text-base-content/80 hover:bg-base-200 hover:text-base-content;
  @apply transition-all duration-200 after:hidden;
  /* Remove default DaisyUI arrow */

  &.active {
    @apply text-primary font-medium;
  }
}

.side-menu-component .collapse-content {
  @apply pb-0;
}

/* Arrow icon rotation */
.side-menu-component .arrow-icon {
  @apply transition-transform duration-200 text-base-content/50;
}

.side-menu-component .collapse input:checked~.collapse-title .arrow-icon {
  @apply rotate-90;
}

/* ========================================
   Sidebar Collapse (Icon-only mode)
   ======================================== */

/* Default expanded state - hide collapsed versions */
.side-menu-component {
  .side-menu-collapsed {
    @apply !hidden;
  }

  .collapse-icon {
    @apply opacity-100;
  }

  .expand-icon {
    @apply opacity-0;
  }
}

/* When collapse checkbox is checked, collapse the sidebar */
.side-menu-collapse-trigger:checked+.side-menu-component,
.side-menu-component.is-collapsed {
  width: var(--side-menu-collapsed-width);

  /* Toggle icon visibility */
  .collapse-icon {
    @apply opacity-0;
  }

  .expand-icon {
    @apply opacity-100;
  }

  /* Hide brand text */
  .side-menu-brand {
    @apply hidden;
  }

  /* Hide menu switcher */
  .menu-switcher {
    @apply hidden;
  }

  /* Hide section labels */
  .menu-label {
    @apply hidden;
  }

  /* Toggle expanded/collapsed item visibility */
  .side-menu-expanded {
    @apply !hidden;
  }

  .side-menu-collapsed {
    @apply !block;
  }

  /* Center menu items in collapsed state */
  .menu-item {
    @apply justify-center p-2;
  }

  /* Reduce list padding */
  .space-y-0\.5.px-2\.5 {
    @apply px-1;
  }

  /* Style the collapse toggle like a menu item in collapsed state */
  .collapse-toggle {
    @apply justify-center p-2;
  }
}

/* ========================================
   Mobile Overlay
   ======================================== */

.side-menu-overlay {
  @apply fixed inset-0 bg-black/50 z-30 opacity-0 pointer-events-none cursor-pointer;
  transition: opacity 0.2s ease-in-out;
}

/* Show overlay when sidebar is open on mobile */
.side-menu-component--fixed.is-active~.side-menu-overlay {
  @apply opacity-100 pointer-events-auto;
}

/* Hide overlay on desktop */
@media (min-width: 1024px) {
  .side-menu-overlay {
    @apply hidden;
  }
}

/* ========================================
   Custom Scrollbar
   ======================================== */

.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: theme('colors.base-content/20') transparent;
  overflow-x: visible;
  overflow-y: auto;

  &::-webkit-scrollbar {
    width: 4px;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
  }

  &::-webkit-scrollbar-thumb {
    background-color: theme('colors.base-content/20');
    border-radius: 2px;
  }

  &::-webkit-scrollbar-thumb:hover {
    background-color: theme('colors.base-content/30');
  }
}

/* ========================================
   Menu Switch Component
   ======================================== */

.side-menu-component--menu-switch-component {
  @apply flex items-center gap-3;

  .iconify,
  .icon-component {
    @apply shrink-0;
  }
}