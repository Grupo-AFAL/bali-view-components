<div <%= tag.attributes(container_attributes) %>>
  <% if readonly? %>
    <%# Readonly: show disabled inputs with current value highlighted %>
    <% scale.each do |rate| %>
      <input type="radio"
             class="<%= star_classes %>"
             disabled
             aria-label="<%= star_aria_label(rate) %>"
             <%= 'checked' if value == rate %> />
    <% end %>
  <% elsif auto_submit? %>
    <%# Auto-submit: buttons that submit the form on click %>
    <%# Stars up to current value are bright, rest are dimmed %>
    <% scale.each do |rate| %>
      <button type="submit"
              name="<%= input_name %>"
              value="<%= rate %>"
              class="<%= star_classes %> <%= 'opacity-30' if rate > value %>"
              aria-label="<%= star_aria_label(rate) %>"
              aria-pressed="<%= rate <= value %>">
      </button>
    <% end %>
  <% else %>
    <%# Standard: radio buttons integrated with form builder %>
    <% scale.each do |rate| %>
      <%= form.radio_button method, rate,
                            class: star_classes,
                            id: star_id(rate),
                            aria: { label: star_aria_label(rate) },
                            checked: value == rate %>
    <% end %>
  <% end %>
</div>
