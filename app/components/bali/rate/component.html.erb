<div <%= tag.attributes(container_attributes) %>>
  <% if readonly? %>
    <%# Readonly: show disabled inputs with current value highlighted %>
    <% scale.each do |rate| %>
      <input type="radio"
             class="<%= star_classes %>"
             disabled
             aria-label="<%= star_aria_label(rate) %>"
             <%= 'checked' if value == rate %> />
    <% end %>
  <% elsif auto_submit? %>
    <%# Auto-submit: radio inputs with Stimulus controller for form submission %>
    <%# Radio inputs give immediate visual feedback, JS handles the submit %>
    <% scale.each do |rate| %>
      <input type="radio"
             name="<%= input_name %>_display"
             class="<%= star_classes %>"
             aria-label="<%= star_aria_label(rate) %>"
             <%= 'checked' if value == rate %>
             data-rate="<%= rate %>"
             data-action="change->rate#submit" />
    <% end %>
    <%# Hidden input to hold the actual submitted value %>
    <input type="hidden" name="<%= input_name %>" value="<%= value %>" data-rate-target="input" />
  <% else %>
    <%# Standard: radio buttons integrated with form builder %>
    <% scale.each do |rate| %>
      <%= form.radio_button method, rate,
                            class: star_classes,
                            id: star_id(rate),
                            aria: { label: star_aria_label(rate) },
                            checked: value == rate %>
    <% end %>
  <% end %>
</div>
